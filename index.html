<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crazy Eights - Jay's Ultimate Edition</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">CRAZY EIGHTS</div>
        <div class="loading-subtitle">JAY'S ULTIMATE EDITION</div>
        <div class="loading-bar">
            <div class="loading-progress"></div>
        </div>
    </div>

    <!-- 3D Background Canvas -->
    <canvas id="game-canvas"></canvas>
    <div class="game-overlay"></div>
    <div class="vignette"></div>
    
    <!-- Main Game Container -->
    <div class="game-container">
        <!-- Header with Game Status -->
        <header class="game-header">
            <div class="header-left">
                <h1 class="game-title">üÉè CRAZY EIGHTS</h1>
                <!-- Game Status Panel -->
                <div class="status-panel">
                    <div class="status-item">
                        <span class="status-icon">üéØ</span>
                        <span class="status-label">Selected:</span>
                        <span class="status-value" id="selectedCount">0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-icon">üì¶</span>
                        <span class="status-label">Stack:</span>
                        <span class="status-value" id="drawStackCount">0</span>
                    </div>
                </div>
            </div>
            <div class="header-center">
                <div class="turn-indicator" id="turnIndicator">
                    <span class="turn-label">CURRENT TURN</span>
                    <span class="turn-value" id="currentTurn">YOUR TURN</span>
                </div>
            </div>
            <div class="header-right">
                <!-- Game Log -->
                <div class="mini-game-log">
                    <div class="game-log-content" id="gameLogContent"></div>
                </div>
                <button class="header-btn" onclick="gameMode.showMenu()">
                    <span class="btn-icon">‚ò∞</span>
                    <span class="btn-text">MENU</span>
                </button>
                <button class="header-btn" onclick="gameMode.toggleSound()" id="soundBtn">
                    <span class="btn-icon">üîä</span>
                    <span class="btn-text">SOUND</span>
                </button>
            </div>
        </header>
        
        <!-- Game Table -->
        <div class="game-table">
            <!-- Opponent Area -->
            <div class="opponent-section">
                <div class="opponent-info">
                    <div class="player-avatar opponent">
                        <div class="avatar-icon">ü§†</div>
                        <div class="card-counter">
                            <span id="opponentName">Opponent</span>: <span id="opponentCardCount">8</span> cards
                        </div>
                    </div>
                </div>
                <div class="opponent-hand" id="opponentHand"></div>
            </div>
            
            <!-- Center Play Area -->
            <div class="play-area">
                <div class="deck-container">
                    <!-- Draw Pile -->
                    <div class="deck-section">
                        <div class="pile-label">DRAW PILE</div>
                        <div class="card-pile draw-pile" id="drawPile" onclick="game.drawCard()">
                            <div class="card card-back">
                                <div class="card-pattern"></div>
                                <div class="card-center">DRAW</div>
                                <div class="card-count" id="drawPileCount">36</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Discard Pile -->
                    <div class="deck-section">
                        <div class="pile-label">DISCARD PILE</div>
                        <div class="card-pile discard-pile" id="discardPile"></div>
                        <div class="stack-indicator" id="stackIndicator" style="display: none;">
                            <span class="stack-text">MUST DRAW</span>
                            <span class="stack-count" id="stackCount">0</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Player Area -->
            <div class="player-section">
                <div class="player-hand-container">
                    <div class="player-hand" id="playerHand"></div>
                </div>
                <div class="player-controls">
                    <div class="player-info">
                        <div class="player-avatar">
                            <div class="avatar-icon">üé©</div>
                            <div class="card-counter">
                                <span id="playerNameDisplay">Player</span>: <span id="playerCardCount">8</span> cards
                            </div>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="action-btn draw-btn" onclick="game.drawCard()" id="drawBtn">
                            <div class="btn-content">
                                <span class="btn-icon">‚ûï</span>
                                <span class="btn-label">DRAW</span>
                                <span class="btn-hint">Press D</span>
                            </div>
                        </button>
                        <button class="action-btn play-btn" onclick="game.playSelectedCards()" id="playBtn" disabled>
                            <div class="btn-content">
                                <span class="btn-icon">‚ñ∂Ô∏è</span>
                                <span class="btn-label">PLAY</span>
                                <span class="btn-hint">Press P</span>
                            </div>
                        </button>
                        <button class="action-btn call-btn" onclick="game.callGame()" id="callGameBtn" disabled>
                            <div class="btn-content">
                                <span class="btn-icon">üèÜ</span>
                                <span class="btn-label">CALL GAME</span>
                                <span class="btn-hint">Press G</span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Multiplayer Lobby -->
    <div class="lobby-container" id="lobbyContainer">
        <div class="lobby-content">
            <h2 class="lobby-title">MULTIPLAYER LOBBY</h2>
            <div class="room-info" id="roomInfo" style="display: none;">
                <span>Room Code:</span>
                <span class="room-code" id="roomCode"></span>
            </div>
            <div class="player-list" id="playerList"></div>
            <div class="lobby-actions">
                <button class="lobby-btn" onclick="multiplayer.createRoom()">CREATE ROOM</button>
                <button class="lobby-btn" onclick="multiplayer.joinRoom()">JOIN ROOM</button>
                <button class="lobby-btn start-btn" onclick="multiplayer.startGame()">START GAME</button>
                <button class="lobby-btn cancel-btn" onclick="multiplayer.closeLobby()">CANCEL</button>
            </div>
        </div>
    </div>
    
    <!-- Notification System -->
    <div class="notification" id="notification"></div>
    
    <!-- Game Menu Modal -->
    <div class="modal" id="menuModal">
        <div class="modal-content menu-modal">
            <div class="modal-header">
                <h2 class="modal-title">GAME MENU</h2>
            </div>
            <div class="modal-body">
                <div class="menu-options">
                    <button class="menu-btn" onclick="gameMode.newGame()">
                        <span class="menu-icon">üéÆ</span>
                        <span>NEW GAME</span>
                    </button>
                    <button class="menu-btn" onclick="gameMode.changeName()">
                        <span class="menu-icon">‚úèÔ∏è</span>
                        <span>CHANGE NAME</span>
                    </button>
                    <button class="menu-btn" onclick="gameMode.showMultiplayer()">
                        <span class="menu-icon">üåê</span>
                        <span>MULTIPLAYER</span>
                    </button>
                    <button class="menu-btn" onclick="gameMode.showRules()">
                        <span class="menu-icon">üìñ</span>
                        <span>RULES</span>
                    </button>
                    <button class="menu-btn" onclick="gameMode.toggleSound()">
                        <span class="menu-icon" id="soundMenuIcon">üîä</span>
                        <span id="soundMenuText">SOUND: ON</span>
                    </button>
                    <button class="menu-btn cancel" onclick="gameMode.closeMenu()">
                        <span class="menu-icon">‚úñÔ∏è</span>
                        <span>CLOSE</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Win/Game Over Modal -->
    <div class="modal" id="gameModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">GAME OVER</h2>
            </div>
            <div class="modal-body">
                <p id="modalMessage"></p>
                <div class="score-display" id="scoreDisplay" style="display: none;">
                    <h3>Final Score</h3>
                    <div class="score-details" id="scoreDetails"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" onclick="game.newGame()">NEW GAME</button>
                <button class="modal-btn" onclick="gameMode.showMenu()">MENU</button>
                <button class="modal-btn secondary" onclick="closeModal()">CLOSE</button>
            </div>
        </div>
    </div>
    
    <!-- Victory Animation Container -->
    <div id="victoryAnimation" class="victory-animation"></div>

    <!-- Three.js for 3D Effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Game Scripts -->
    <script src="game-engine.js"></script>
    <script src="multiplayer.js"></script>
    <script src="ui-manager.js"></script>
    
    <script>
        // Initialize game when page loads
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
                // Show menu first or start game directly
                gameMode.showMenu();
            }, 2000);
        });
    </script>
</body>
</html>